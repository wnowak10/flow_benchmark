<div ng-controller="FoobarController">
    
    <div class="control-group" >
        <label class="control-label"> Compute Engine: </label>
        <div class="controls" >
            <select dku-bs-select="{liveSearch:true}" ng-model="config.computeEngine" ng-options="v for v in engines" />
            <span class="help-inline"> How is computation handled? </span>
        </div>
    </div>
    
    <div class="control-group" >
        <label class="control-label"> Connection Type: </label>
        <div class="controls" >
            <select onchange=s3id() id="connectionType" dku-bs-select="{liveSearch:true}" ng-model="config.connectionType" ng-options="v for v in connections" />
            <span class="help-inline"> Dataset connection. </span>
        </div>
    </div>
    
    <div class="control-group" >
        <label class="control-label">Spark pipeline-able?</label>
        <div class="controls">
            <input type="checkbox" ng-model="config.sparkPipeline" value="True"/>
            <span class="help-inline"> Enable spark pipelines in flow. </span>
        </div>
    </div>

    <div class = "control-group">
        <label class="control-label">File format: </label>
        <select ng-model="config.formatType">
              <option value="csv">      csv </option>
              <option value="parquet">  parquet </option>
              <option value="avro">     avro </option>
              <option value="orc">      orc </option>
              <option value="SQL">      SQL </option>
        </select>
    </div>
    
    
    <div id="myDiv">
         
    </div>
<!--     <div class="control-group" >
        <label class="control-label"> S3 Bucket (if applicable) </label>
        <div class="controls" >
            <input ng-model="config.s3Bucket" />
            <span class="help-inline"> S3 Bucket. </span>
        </div>
    </div> -->

</div>

<script>

function s3id() {
//   var x = document.getElementById("connectionType").value;
    var  e = document.getElementById (  "connectionType"  );
var  connectionType = e.options [e.selectedIndex] .text;
  console.log('options???', connectionType);
    
  if(connectionType.toLowerCase().includes("s3")){
      console.log('work?');
    var myDiv = document.getElementById("myDiv");
     var lab = document.createElement("label");
     lab.innerHTML = 'S3 Bucket:';
   selectList = document.createElement("input");
//       selectList = myDiv.createElement("input");
   
      myDiv.appendChild(selectList);
//      selectList.ng-model="config.s3Bucket"
//     myDiv.appendChild(selectList);
//     //Create and append the options
//     for (var i = 0; i < array.length; i++) {
//         var option = document.createElement("option");
//         option.value = array[i];
//         option.text = array[i];
//         selectList.appendChild(option);
//             }
	}
    else {
    console.log('not three');
	var divv = document.getElementById("myDiv"); 
    divv.remove();  
    };
};
</script>